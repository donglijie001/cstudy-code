# socket编程
以下笔记来源于 TCP/IP 网络编程
接受连接请求的套接字创建过程如下：
- 调用socket函数创建套接字
- 调用bind函数分配IP地址和端口号
- 调用list函数转为可接收请求状态
- 调用accept函数处理连接请求
## 文件描述符
- 0: 标准输入
- 1: 标准输出
- 2: 标准错误
上面这三种是程序开始创建后自动被分配的文件描述符
## 2套接字类型与协议设置
### 创建套接字
```
#include<sys/socket.h>
int socket(int domain,int type,int protocol);
# 成功时返回文件描述符，失败时返回-1.
```
- domain: 套接字中使用的协议族信息
- type： 套接字数据传输类型信息
- protocol：计算机间通信中使用的协议信息
#### 协议族分类
- PF_INET   ipv4 互联网协议族
- PF_INET6  ipv6 互联网协议族
- PF_LOCAL  本地通信的unix协议族
- PF_PACKET 底层套接字的协议族
- PF_IPX    IPX Novell协议族
> 套接字中实际采用的最终协议信息是通过socket函数的第三个参数传递的，在制定的协议族范围内通过第一个参数决定第三个参数
#### 套接字类型type
- SOCK_STREAM 面向连接的套接字，tcp连接，可靠传输
- SOCK_DGRAM 面向消息的套接字，udp数据报，不可靠传输
#### 协议的最终选择
socket 套接字的前两个参数基本上已经可以决定数据传输所采用的协议，所以大部分情况下第三个参数设置为0即可，除非遇到**同一协议族中存在多个数据传输方式相同的协议**